# 排班 Web 應用程式

## 簡介

本專案旨在建立一個簡單易用的排班管理系統，供管理者使用。此應用程式將提供多項功能，以簡化排班流程，提高效率，並確保員工配置符合業務需求。

## 功能

### 1. 員工管理

*   **新增員工：** 管理者可以新增員工，只需記錄員工姓名。
*   **編輯員工資訊：** 管理者可以修改員工姓名。
*   **刪除員工：** 管理者可以刪除不再需要的員工。
*   **員工列表：** 顯示所有員工的列表，方便管理者查看和搜尋。

### 2. 班別管理

*   **班別類型：**
    *   白班 (07:30-15:30)
    *   小夜班 (15:00-23:00)
    *   大夜班 (23:00-08:00)
    *   12-8 班 (12:00-20:00)
    *   9-5 班 (09:00-17:00)
    *   白班待命 (07:00-15:00)
    *   小夜待命 (15:00-23:00)
    *   大夜待命 (23:00-07:00)
    *   Off日待 (07:00-19:00)
    *   Off夜待 (19:00-07:00)
    *   休假
    *   例假
*   **班別設定：** 系統預設班別時間，管理者可以根據需求調整。
*   **班別列表：** 顯示所有班別的列表，包含班別名稱和對應時間，方便管理者查看和管理。
*   **待命班別說明：**
    *   待命班別不計入工作時間
    *   待命期間如需要出勤，需另外記錄實際出勤時間
    *   待命班別可以與其他班別重疊
*   **特殊情況備註：**
    *   加班：
        *   白班加班：+1 ~ +20（例如：白班+1、白班+2等）
        *   小夜加班：+1 ~ +4（例如：小夜+1、小夜+2等）
    *   值班：值5 ~ 值8（例如：值5、值6等）
    *   假日班別：
        *   假日白班：D1 ~ D8
        *   假日小夜：D1 ~ D8
        *   假日大夜：D1 ~ D8
    *   備註格式：班別名稱 + 特殊情況（例如：白班+1、小夜值5、假日白班D1）

### 3. 排班功能

*   **建立排班表：** 管理者可以建立指定月份的排班表。
*   **自動排班：** 系統可以根據預設規則自動安排員工的班別。
*   **手動排班：** 管理者可以手動調整員工的班別，以滿足特殊需求。
*   **排班規則：**
    *   每7天內必須安排2天休假（1天休假 + 1天例假）
    *   相鄰班別之間必須間隔12小時以上
    *   系統會自動檢查並提示違反規則的排班
*   **排班衝突檢查：** 系統可以檢查排班表中是否存在衝突，例如同一員工在同一時間被安排了多個班別。
*   **複製排班表：** 管理者可以複製現有的排班表，以快速建立新的排班表。
*   **換班記錄：**
    *   記錄每個員工的原始排班資訊（日期和班別）
    *   記錄換班操作，包含：
        *   換班日期
        *   原始班別
        *   新班別
        *   與哪位員工進行換班
        *   換班原因（選填）
    *   換班規則：
        *   休假只能與休假交換
        *   例假只能與例假交換
        *   確保換班後每7天內必須安排1天休假和1天例假
        *   確保相鄰班別之間必須間隔12小時以上
    *   提供換班歷史查詢功能
    *   支援換班記錄匯出

### 4. 報表與匯出

*   **排班報表：** 產生各種排班報表，例如員工工作時數報表、班別覆蓋率報表等。
*   **資料匯出：** 將排班資料匯出為 CSV 或 Excel 格式，方便進行進一步的分析和處理。

## 技術架構

*   **前端：** React
    *   使用 React 框架建立使用者介面
    *   使用 React Router 進行路由管理
    *   使用 Material-UI 或 Ant Design 建立美觀的使用者介面
    *   使用 React Query 管理 API 請求狀態
    *   使用 React Hook Form 處理表單
    *   使用 Jest 和 React Testing Library 進行單元測試

*   **後端：** React
    *   使用 React 框架建立後端 API
    *   使用 Express.js 作為 Web 伺服器
    *   使用 MongoDB 作為資料庫
    *   使用 JWT 進行身份認證
    *   使用 Jest 進行單元測試

*   **資料庫：** MongoDB
    *   使用 MongoDB 儲存員工、班別和排班資料
    *   使用 Mongoose 進行資料庫操作
    *   使用 MongoDB Compass 進行資料庫管理

*   **開發工具：**
    *   Git 版本控制
    *   Docker 容器化部署
    *   GitHub Actions CI/CD
    *   ESLint 和 Prettier 程式碼格式化
    *   Husky 和 lint-staged 確保程式碼品質

## 開發計畫

*   **第一階段：員工管理和班表建立**
    *   **員工管理：**
        *   新增員工
        *   編輯員工資訊
        *   刪除員工
        *   顯示員工列表
    *   **班表管理：**
        *   新增班表
        *   刪除班表
        *   視覺化呈現整個月份所有員工的班表

*   **第二階段：換班功能**
    *   **換班功能：**
        *   在班表畫面上實現一對一的換班功能
        *   支援拖曳或勾選兩個班別進行交換
        *   換班時檢查上班時數的合理性
        *   記錄換班歷史
    *   **換班規則：**
        *   確保換班後每7天內必須安排2天休假
        *   確保相鄰班別之間必須間隔12小時以上
        *   系統會自動檢查並提示違反規則的換班

*   **第三階段：報表功能**
    *   開發報表功能
    *   資料匯出功能

## 如何貢獻

歡迎大家參與本專案的開發！您可以透過以下方式貢獻：

*   提交 Issue：報告 Bug 或提出新的功能建議。
*   提交 Pull Request：修復 Bug 或新增功能。

## 授權

本專案採用 [Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License (CC BY-NC-ND 4.0)](https://creativecommons.org/licenses/by-nc-nd/4.0/) 授權。

這表示您可以：
- 分享 — 以任何媒介或格式重製及散布本素材

但需要遵守以下條件：
- 姓名標示 — 您必須給予適當表彰、提供指向本授權條款的連結，以及指出（本作品的原始版本）是否已被變更。
- 非商業性 — 您不得將本素材進行商業目的之使用。
- 禁止改作 — 若您重混、轉換本素材，或依本素材建立新素材，則您不得散布改作後的素材。

## 開發歷史紀錄

### 2025-03-25 功能開發進度
1. 基礎功能建置
   - 建立月曆視圖，支援月份切換
   - 實作員工管理基本功能
   - 完成班別管理系統設計

2. 排班功能實作
   - 支援多種班別：
     - 一般班別：白班、小夜班、大夜班、12-8班、9-5班
     - 待命班別：白班待命、小夜待命、大夜待命、Off日待、Off夜待
     - 休假類型：休假、例假

3. 排班規則實作
   - 相鄰班別時間間隔檢查
     - 確保班別之間至少間隔 12 小時
     - 自動禁用不符合時間間隔的班別選項
   - 休假規則檢查
     - 每 7 天必須安排 1 天休假
     - 每 7 天必須安排 1 天例假
     - 在排班時自動檢查並提示

4. 排班管理功能
   - 新增排班
     - 可選擇員工和班別
     - 即時檢查排班規則
     - 防止重複排班
   - 刪除排班
     - 帶有確認對話框
     - 清楚顯示要刪除的排班資訊
     - 防止誤刪

5. 使用者介面優化
   - 月曆視圖
     - 清晰的日期顯示
     - 跨月份日期的特殊處理
     - 自適應的格子大小
   - 排班顯示
     - 直觀的排班資訊展示
     - 互動式的刪除按鈕
     - 懸停效果增強可讀性

6. 待開發功能
   - 資料持久化儲存
   - 排班資料匯出功能
   - 更多的排班規則檢查
   - 排班統計報表 